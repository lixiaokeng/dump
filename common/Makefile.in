# $Id: Makefile.in,v 1.7 2011/06/10 13:41:41 stelian Exp $

top_srcdir=	@top_srcdir@
srcdir=		@srcdir@
top_builddir=	..

@MCONFIG@

INC=		-I. -I$(top_srcdir)/dump -I$(top_srcdir)/compat/include
ALL_CFLAGS=	@CPPFLAGS@ @CFLAGS@ @CCOPTS@ -pipe $(OPT) $(GINC) $(INC) $(DEFS) @DUMPDEBUG@
ALL_LDFLAGS=	@LDFLAGS@ @LDOPTS@ @STATIC@
LIBS=		$(GLIBS) @ZLIB@ @BZLIB@ @BLKID@ @SSLLIB@ @SQLITE3@

SRCS=		dumprmt.c transformation_null.c transformation_lzo.c transformation_zlib.c transformation_bzlib.c \
    transformation_ssl.c legacy_indexer.c sqlite_indexer.c
OBJS=		dumprmt.o transformation_null.o transformation_lzo.o transformation_zlib.o transformation_bzlib.o \
    transformation_ssl.o legacy_indexer.o sqlite_indexer.o

.c.o:
	$(CC) -c $(ALL_CFLAGS) $< -o $@

all::		$(OBJS) indexer_test

# Disabled due to missing transform_test.c -- it was accidentally not added.
# We can re-add when someone re-implements the test code :(.
#transform_test:	transform_test.o $(OBJS) $(DEPLIBS)
#	$(LD) $(ALL_LDFLAGS) -o transform_test transform_test.o \
#		transformation_null.o transformation_lzo.o transformation_zlib.o \
#		transformation_bzlib.o transformation_ssl.o  $(LIBS)

indexer_test:	indexer_test.o $(OBJS) $(DEPLIBS)
	$(LD) $(ALL_LDFLAGS) -o indexer_test indexer_test.o legacy_indexer.o \
	sqlite_indexer.o dumprmt.o $(LIBS)

install::

clean::
	$(RM) -f \#* *.s *.o *.a *~ core

distclean::	clean
	$(RM) -f Makefile Makefile.old .depend

# +++ Dependency line eater +++
# 
# Makefile dependencies follow.  This must be the last section in
# the Makefile.in file
#

