$Id: CHANGES,v 1.10 1999/10/31 19:48:25 tiniou Exp $

Changes between versions 0.4b7 and 0.4b8 (released ???????????????)
===================================================================

1.	Put dump sources under CVS, added Id tags in all files so
	one can use 'ident' on binary files.

2.	Added the dump/restore version in the usage text so one can
	easily verify the version he is using.

3.	Small patch from Nuno Oliveira <nuno@eq.uc.pt> which fixes
	a va_start/va_end problem on linux-ppc (always call va_start
	va_end in pairs each time we use a vararg function).

4.	Added again the DT_* constants because old libc does not
	contain them :(. Thanks to Eric Maisonobe <virnet@nat.fr>
	for submitting the bug report.

5.	Added the RSH environment variable in order to be able to
	use a rsh replacement like ssh when doing remote backups (and
	bypass the security limitations of rcmd). Now you can do remote
	backups without being root (or making dump setuid root).

6.	Modified again the way dumpdates works. For incremental dumps,
	we need to read dumpdates even if we are not using 'u' option.
	Thanks to Bdale Garbee <bdale@gag.com> for his ideas on how
	this should work.

Changes between versions 0.4b6 and 0.4b7 (released October 8, 1999)
===================================================================

1.	Removed the 'k' flag from the restore 'about' text if kerberos
	was not compiled in.

2.	Prototyped (f)setflags from e2fsprogs and corrected the calls
	to them (fsetflags takes a char*, setflags an open fd!).

3.	(f)setflags is called only if the flags aren't empty. If the
	file is a special file, a warning is printed, because changing
	flags implies opening the device. Normally, a special file
	should not have any flag... (Debian bug #29775, patch provided
	by Abhijit Dasgupta <abhijit@ans.net>).

4.	Made possible to dump a file system not mentioned in /etc/fstab.
	(Debian bug #11904, patch provided by Eirik Fuller <eirik@netcom.com>).

5.	Changed the default behaviour to not create dumpdates
	unless 'u' option is specified. Removed the old "debian-patch"
	which provided the same thing. (Debian bug #38136, #33818).

6.	Removed all those dump*announce, since they were getting old...

7.	Added warning messages if dumpdates does not exist and
	when an inferior level dump does not exist (except for a level 0
	dump).

8.	Debugged the glob calls in interactive mode: restore used a 
	dirent struct which was different from the /usr/include/dirent.h
	one (this used to work, is it a glibc2 change?), so none of the 
	compat glob (which used /usr/include/dirent.h) or the system glob 
	worked. Restore use now the system dirent (and the system 
	DT_* constants), which are compatible with BSD ones.

9.	Added a configure flag (--with-dumpdatespath) to specify
	the location of dumpdates file. By default, it is 
	/etc/dumpdates.

10.	Added the "AUTHOR" and "AVAILABILITY" sections and 
	included the current date/version in man pages.

11.	Corrected the estimation of remaining time when
	the operator doesn't change the tapes quickly enough. This
	was an old bug, I thought I corrected it, and discovered
	that in fact it was corrected in two different places, so
	the results canceled each other...

Changes between versions 0.4b5 and 0.4b6 (released October 1, 1999)
===================================================================

1.	Integrated multiple patches from RedHat, Debian and SuSE:

	- tweak dump/itime.c to not try to read dumpdates if the 'u' option 
	  isn't specified.
	- several fixes in the man pages.
	- update the default tape device to /dev/st0.
	- many updates for Linux Alpha (byte ordering, size_t etc).
	- buffer overruns.
	- use environment variable for TMPDIR (instead of /tmp).
	- use sigjmp_buf instead of jmp_buf (RedHat bug #3260).
	- workaround egcs bug (RedHat bugs #4281 and #2989).
	- wire $(OPT) throughout Makefile's.

2.	Upgrade the dump revision to 1, making possible to dump filesystems
	made with e2fsprogs-1.15 or newer. Nothing seems to break...

3.	Fix some compile warnings, prototype all functions.

4.	Use glibc err/glob instead of internal compatibility
	routines (only if available).

5.	Fix a compile error on Linux 2.2.7 / libc5 (5.4.44) (patch provided
	by Bernhard Sadlowski <sadlowsk@mathematik.uni-bielefeld.de>).

Changes between versions 0.4b4 and 0.4b5 (released September 22, 1999)
======================================================================

1.	Integrated the changes from FreeBSD-3.1-RELEASE
	(mostly bug fixes, buffer overruns, dump has now an "automatic
	tape length calculation" flag, dump/restore can use kerberos now
	(this is NOT tested), use environment variables for TAPE and
	RMT etc.).

2.	Integrated three RedHat patches ("glibc", "kernel" and "bread" patches)

3.	Corrected a bug in restore when using 'C' option with multi-volumes
	tapes (files splited accros two tapes give "size changed" errors
	when comparing).

4.	Corrected the long standing bug when dumping multiple tapes.
	This works for me, needs further testing.

Changes between versions 0.4b3 and 0.4b4 (released January 17, 1997)
====================================================================

1.	Dump now runs correctly on kernels 2.1.x
	Fix made by Gerald Peters <gapeters@worldnet.att.net>

Changes between versions 0.4b2 and 0.4b3
========================================

1.	Use realpath() if available

2.	Report statistics

Changes between versions 0.4b1 and 0.4b2
========================================

1.	Fixed the bug fix from Greg Lutz (I had made a mistake when integrating
	the patch)

2.	Fixed restore to make it able to read FreeBSD 2.x dumps again

3.	Fixed configure.in to correctly handle --enable-rmt

Changes between versions 0.3 and 0.4b1
======================================

1.	Integrated the changes from 4.4BSD-Lite2

2.	Integrated the patches from Debian and Red Hat

3.	Portability changes: use the __u32, __u16, __s32, and __s16 types

4.	Changed dump to use the Ext2fs library to get block addresses.  This
	should solve the endianness problem on SparcLinux.

5.	Created a configure.in file (shamelessly stolen from the e2fsprogs
	distribution's one) to use autoconf

6.	Fixed a few minor bugs

Changes between versions 0.2e and 0.2f
======================================

1.	Added the creation of named pipes (fifos) in restore.

2.	Added the -N flag in the restore manual page.

3.	Added the file kernel.patch which contains the llseek() optimization
	patch for 1.2.x kernels.

4.	Fixed a bug in the restoration of symbolic links: owner and group were
	not restored.

5.	Integrated some changes from FreeBSD 2.2.

6.	Added a call to ftruncate() after restoring each file to restore
	correctly files ending by a hole.

Changes between versions 0.2d and 0.2e
======================================

1.	Fixed a bug in the "set owner/mode" process.  Every file was restored
	with owner = root (0) and group = root/wheel/whatever (0).

Changes between versions 0.2c and 0.2d
======================================

1.	Dump is now able to backup 2GB+ filesystems.

2.	Dump and restore can now be linked as static binaries.

Changes between versions 0.2b and 0.2c
======================================

1.	Fixed a bug when dumping ``slow'' (i.e. normal) symbolic links.

Changes between versions 0.2a and 0.2b
======================================

1.	Really fixed the bug that I should have corrected in 0.2a.

2.	Enabled optimization again.

Changes between versions 0.2 and 0.2a
=====================================

1.	Disabled the optimization during compilation.

Changes between versions 0.1 and 0.2
====================================

1.	Fixed a bug in fstab.c which caused a null pointer to be stored in
	the fs_type field (actually, I modified the file fstab.c to make it
	use the mntent functions).

2.	Dump and restore now use a 4.3 BSD compatible dump format.  Backups
	made by dump should be readable by the BSD restore and backups made
	by the BSD dump should be readable by restore.  Unfortunately, this
	means that the dump format has changed between version 0.1 and version
	0.2 :-(

3.	Dump is now able to backup a subtree, it is no longer limited to whole
	filesystems like the BSD version.

4.	Dump now uses ext2_llseek() so it is able to backup filesystems bigger
	than 2 GB.

Changes between versions 0.0 and 0.1
====================================

1.	Now create links rdump and rrestore during the `make install' step.

2.	Linux port specific bugs added to the manual pages

3.	Incorrect estimation of the number of tapes blocks fixed when doing
	incremental backups.

4.	Better ls-like format in restore in interactive mode.
